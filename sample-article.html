<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8" />
      <title>My BCIT Project</title>
      <meta name="comp1800 boilerplate code" content="my bcit project" />
      <meta name="author" content="BCIT" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
         crossorigin="anonymous"
      />
      <link
         rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      />
      <link rel="stylesheet" href="./styles/my_style.css" />
      <link rel="stylesheet" href="./styles/article.css" />


      <!-- Boostrap JS CDN -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script
         src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
         integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
         crossorigin="anonymous"
      ></script>

      <!-- Firebase 8 related CSS CDN -->

      <!-- Firebase 8 related JS CDN -->
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>

      <!-- Link to the api keys for your Firebase project -->
      <script src="scripts/firebaseAPI.js"></script>

      <!--Google jQuery CDN-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      
   </head>

   <body>
      <!-- Function buttons -->
      <div class="functionality">
         <button onclick="goBack()">Back</button>
         <button id="audio-choice">
            <img
               class="function-icon"
               alt="Audio choices"
               src="./images/audio-choice.png"
            />
            Audio
         </button>
         <button id="save-news" onclick="saveNews(localStorage.getItem('newsID'))">
            <img
               class="function-icon"
               alt="Save news"
               src="./images/save.png"
            />Save
         </button>
      </div>

      <!-- Popup windows -->
      <div id="options" class="modal">
         <div class="modal-content">
            <span class="close">&times;</span>
            <div class="d-grid mx-auto" style="width: 70%">
               <a href="#">
                  <input
                     class="btn btn-lg"
                     type="button"
                     value="Read whole article"
                     style="width: 100%; font-size: 90%"
                     onclick="readAll()"
                  />
               </a>
            </div>
            <hr style="color: white; margin-top: 0" />
            <div class="d-grid mx-auto" style="width: 70%">
               <a href="#">
                  <input
                     class="btn btn-lg"
                     type="button"
                     value="Read paragraphs"
                     style="width: 100%; font-size: 90%"
                     onclick="readChoices()"
                  />
               </a>
            </div>
         </div>
      </div>

      <!-- Article content -->
      <section id="content">
         <h1 id="title">
         </h1>
         <p class="detail">by <b id="source"></b></p>
         <p class="detail" id="time"></p>
         <p id="summary">
            
         </p>
         <figure>
            <img id="thumbnail" alt="thumbnail" src="https://dummyimage.com/600x400/000/fff" />
            <figcaption id="caption" class="detail"></figcaption>
         </figure>
      </section>

      <!-- JavaScript goes here -->
      <script src="./scripts/article.js">
      </script>
      <script src="./scripts/my_script.js"></script>
      <script>

         changeFontSize = function () {
            firebase.auth().onAuthStateChanged((user) => {
               // Check if user is signed in:
               if (user) {
                  // go to the correct user document by referencing to the user uid
                  currentUser = db.collection("users").doc(user.uid);
                  //get the document for current user
                  currentUser.get().then((userDoc) => {
                     //get the settings data of the user
                     var userFontOption = userDoc.data().fontoption;
                     if (userFontOption != null) {
                        if (userFontOption == 'default') {
                           $('#content').css({'font-size': '120%'})
                        }else if (userFontOption == 'large') {
                           $('#content').css({'font-size': '140%'})
                        }else if (userFontOption == 'larger') {
                           $('#content').css({'font-size': '160%'})                          
                        }else if (userFontOption == 'largest') {
                           $('#content').css({'font-size': '180%'})                           
                        }
                     }
                  });
               } else {
                  // No user is signed in.
                  console.log("No user is signed in");
               }
            });
         }
         jQuery(document).ready(changeFontSize);
      </script>
   </body>
</html>
