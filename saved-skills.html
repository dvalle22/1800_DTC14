<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8" />
      <title>My BCIT Project</title>
      <meta name="comp1800 boilerplate code" content="my bcit project" />
      <meta name="author" content="BCIT" />

      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
         crossorigin="anonymous"
      />
      <link
         rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      />
      <link rel="stylesheet" href="./styles/my_style.css" />

      <!-- Bootstrap CSS CDN -->

      <!-- Boostrap JS CDN -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script
         src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
         integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
         crossorigin="anonymous"
      ></script>

      <!-- Firebase 8 related CSS CDN -->

      <!-- Firebase 8 related JS CDN -->
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

      <!-- Link to the api keys for your Firebase project -->
      <script src="scripts/firebaseAPI.js"></script>

      <!--Google jQuery CDN-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

      <style>
          h1 {
              text-align: center;
              font-size: 2em;
              margin: 0.5em;
          }
          #saved_skills_container {
              font-size: 1em;
              width: 80%;
              margin: auto;
          }
          #saved_skills_container h4 {
              font-size: 1.5em;
          }
          #saved_skills_container > div {
              background-color: rgb(240, 238, 218);
              padding: 5%;
              margin: 5%;
          }
      </style>
   </head>

   <body>
       <button id="back-button" onclick="goBack()">Back</button>
       <h1>Saved Lessons</h1>
       <div id="main_container">
           <div id="CardTemplate">
               <h4 class="card-title"></h4>
               <a class="card-href" href="#"></a>
           </div>
           <div id="saved_skills_container">

           </div>
       </div>

       <script src="./scripts/my_script.js"></script>
       <script>
           function displayCards(collection) {
               firebase.auth().onAuthStateChanged((user) => {
                   if (user) {
                       let CardTemplate = document.getElementById("CardTemplate");
                       db.collection("users/" + user.uid + "/" + collection)
                           .get().then(snap => {
                               var i = 1;
                               snap.forEach(doc => { //iterate thru each doc
                                   var title = doc.data().name;
                                   console.log(title);
                                   var theURL = doc.data().url;
                                   let newcard = CardTemplate.cloneNode(true);

                                   newcard.querySelector('.card-title').innerHTML = title;
                                   newcard.querySelector('.card-href').innerHTML = 'Go to skill';
                                   newcard.querySelector('.card-href').href = "./" + theURL;

                                   document.getElementById('saved_skills_container').appendChild(
                                       newcard);
                               })
                           })
                   }
               })
           }
           displayCards('saved_skills');
       </script>
   </body>
</html>
